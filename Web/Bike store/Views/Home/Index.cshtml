@model IEnumerable<NoNameBikes.Models.ProductCategory>

@{
    ViewData["Title"] = "Home Page";
    var salesList = (IEnumerable<NoNameBikes.Models.SaleProduct>) ViewData["SalesList"];
}

<style>

    h1, h2 {
        text-align: center;
    }

    #actionLink:link, #actionLink:visited {
        border-style: solid;
        border-color: black;
        color: black;
        padding: 14px 25px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
    }

    #actionLink:hover, #actionLink:active {
        text-decoration: underline;
    }

    .img {
        height: 100%;
        width: 100%;
    }

    .table td {
        padding-top: 25px;
        padding-bottom: 25px;
        padding-left: 20px;
        color: whitesmoke;
        vertical-align: middle;
        font-size: 30px;
    }

    .middleTD {
        text-align: right;
    }

    .mySlides {
        display: none;
        height: 400px;
        width: 100%;
    }

    .leftArrow, .rightArrow, .dot {
        cursor: pointer;
    }

    .leftArrow {
        text-align: left;
        padding-left: 40px;
    }

    .rightArrow {
        text-align: right;
        padding-right: 40px;
    }

    .arrow:hover {
        color: #b4aa50;
    }

    .dot {
        height: 13px;
        width: 13px;
        padding: 0;
        border: 1px solid;
        background-color: #000;
        color: #fff;
        display: inline-block;
        padding-left: 8px;
        padding-right: 8px;
        margin-bottom: 15px;
        text-align: center;
        border-radius: 50%;
        background-color: transparent;
    }

    .dot:hover {
        color: #000;
        background-color: #fff;
    }

    .center {
        text-align: center;
        display: inline-block;
        width: auto;
        margin-top: 16px;
        margin-bottom: 16px;
        font-size: 18px;
        color: #fff;
        position: absolute;
        left: 50%;
        bottom: 0;
        transform: translate(-50%,0%);
        -ms-transform: translate(-50%,0%);
    }

    .content {
        margin-left: auto;
        margin-right: auto;
        max-width: 800px;
        position: relative
    }

    .white {
        color: #000;
        background-color: #fff;
    }

    p {
        font-size: large;
        text-align: center;
    }

    #brand {
        font-size: 55px;
        text-align: center;
    }

    .sale {
        color: red;
        margin: 0px;
    }

    .SalePrice {
        font-weight:bold;
    }

    .discount {
        font-size: 15px;
    }

    .originalPrice {
        margin: 0px;
    }

    .tdSales {
        align-content:center;
        text-align:center;

    }

    #saleTable {
        width: 100%;
    }

    .saleName {
        padding-top:20px;
        color:black;
        font-size: 18px;
    }

    .linkSales {
        color: black;
        font-size: 22px;
    }
</style>

<div class="main">
    <br />
    <p id="brand">NoName Bike Company</p>
    <br />
    <hr />
    <br />
    <br />
    <h2>We can get you pedaling in no time.</h2>
    <br />
    <p>No matter who you are, you can find your ideal bike for any type of lifestyle that suit you best. We have bike in many different colours, sizes and styles along with accessories too. We have all sorts of bike suitable for any type of terrain raging from the casual touring bike to the extreme mountain bike. For those who want to customize their bike, we also offer bike component to build your own personalize bicycle. And last but not least, clothing and safety guide are available as well. </p>
    <br />
    <br />

    <div class="content">
        <img class="mySlides img" src="~/images/touring_2000.jpg">
        <img class="mySlides img" src="~/images/bike-store-employee.jpg">
        <img class="mySlides img" src="~/images/bikeFix.jpg">
        <img class="mySlides img" src="~/images/mountain_400.jpg">
        <img class="mySlides img" src="~/images/road_750.jpg">
        <div class="center" style="width:100%">
            <div class="leftArrow arrow" onclick="plusDivs(-1)">&#10094;</div>
            <div class="rightArrow arrow" onclick="plusDivs(1)">&#10095;</div>
            <span class="dot" onclick="currentDiv(1)"></span>
            <span class="dot" onclick="currentDiv(2)"></span>
            <span class="dot" onclick="currentDiv(3)"></span>
            <span class="dot" onclick="currentDiv(4)"></span>
            <span class="dot" onclick="currentDiv(5)"></span>
        </div>
    </div>

    <br />
    <br />
    <hr />
    <br />
    <h1>Sales</h1>
    <br />
    <hr />
    <br />
    <a href="@Url.Action("Sales", "Home", null)" class="linkSales">See all products on sale here</a>
    <br />
    <br />
    <br />
    <table id="saleTable">
        <tr>
            @{
                int count = 0;
                int itemDisplay = 5;

                @foreach (var item in salesList)
                {
                    if (count == itemDisplay)
                    {
                        break;
                    }

                    string controller = "";
                    switch (item.ProductCategory.ParentProductCategoryId)
                    {
                        case 1:
                            controller = "Bikes";
                            break;
                        case 2:
                            controller = "Components";
                            break;
                        case 3:
                            controller = "Clothing";
                            break;
                        case 4:
                            controller = "Accessories";
                            break;
                    }

                    string action = item.ProductCategory.Name.ToString().Replace(" ", "");

                    <td class="tdSales">
                        <a href="@Url.Action("Details", controller, new { id = item.ProductModelID})" class="tdSales">
                            @{
                                var base64 = Convert.ToBase64String(item.Photo);
                                var imgsrc = string.Format("data:image/gif;base64,{0}", base64);
                                <img src='@imgsrc' width="180px" height="180px" class="img" />
                            }
                            <p id="actionLink" class="saleName">@item.ProductModel</p>
                        </a>
                        <strike class="originalPrice">@item.Price.ToString().Substring(0, item.Price.ToString().Length - 2)$</strike>
                        @{
                            decimal discount = item.Price - (decimal)item.SalePrice;
                        }
                        <p class="sale discount">-@discount.ToString().Substring(0, discount.ToString().Length - 2)$</p>
                        <p class="sale SalePrice">@item.SalePrice.ToString().Substring(0, item.SalePrice.ToString().Length - 2)$</p>
                    </td>

                    count++;
                }
            }
        </tr>
    </table>

    <br />
    <br />
    <hr />
    <br />
    <h1>Browse our bike categories below</h1>
    <br />
    <br />

    <br />

    <table class="table">
        @{
            foreach (var item in Model)
            {
                <tr>
                    @{
                        if (item.Name == "Mountain Bikes")
                        {
                            <td>
                                <a href="@Url.Action(item.Name.Substring(0, item.Name.IndexOf(" ")), "Bikes", null)">
                                    <img class="img" src="~/images/mountain_bike.jpg" alt="mountain bike picture" />
                                </a>
                            </td>
                            <td class="optionBike">
                                @Html.ActionLink(item.Name, item.Name.Substring(0, item.Name.IndexOf(" ")), "Bikes", null, new { id = "actionLink" })
                            </td>
                        }
                        else if (item.Name == "Touring Bikes")
                        {
                            <td>
                                <a href="@Url.Action(item.Name.Substring(0, item.Name.IndexOf(" ")), "Bikes", null)">
                                    <img class="img" src="~/images/touring_bike.jpg" alt="touring bike picture" />
                                </a>
                            </td>
                            <td>
                                @Html.ActionLink(item.Name, item.Name.Substring(0, item.Name.IndexOf(" ")), "Bikes", null, new { id = "actionLink" })
                            </td>
                        }
                        else if (item.Name == "Road Bikes")
                        {
                            <td class="middleTD">
                                @Html.ActionLink(item.Name, item.Name.Substring(0, item.Name.IndexOf(" ")), "Bikes", null, new { id = "actionLink" })
                            </td>
                            <td>
                                <a href="@Url.Action(item.Name.Substring(0, item.Name.IndexOf(" ")), "Bikes", null)">
                                    <img class="img" src="~/images/road_bike.jpg" alt="road bike picture" />
                                </a>
                            </td>
                        }
                    }

                </tr>
            }
        }
    </table>


</div>

<script>
    var myIndex = 0;        //automatic slide show
    var slideIndex = 1;     //manual slide show

    //automatic slide show

    carousel();

    function carousel() {
        var i;
        var x = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");
        for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
        }
        myIndex++;
        if (myIndex > x.length) { myIndex = 1 }
        x[myIndex - 1].style.display = "block";
        setTimeout(carousel, 2000);
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" white", "");
        }
        dots[myIndex - 1].className += " white";
    }

    //slide show with arrows

    showDivs(slideIndex);

    function plusDivs(n) {
        showDivs(slideIndex += n);
    }

    function currentDiv(n) {
        showDivs(slideIndex = n);
    }

    function showDivs(n) {
        var i;
        var x = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");
        if (n > x.length) { slideIndex = 1 }
        if (n < 1) { slideIndex = x.length }
        for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" white", "");
        }
        x[slideIndex - 1].style.display = "block";
        dots[slideIndex - 1].className += " white";
    }
</script>