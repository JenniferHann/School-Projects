@model IEnumerable<NoNameBikes.Models.ProductCategory>

@{
    ViewData["Title"] = "Page d'acceuil";
    var salesList = (IEnumerable<NoNameBikes.Models.SaleProduct>)ViewData["SalesList"];
}

<style>

    h1, h2 {
        text-align: center;
    }

    #actionLink:link, #actionLink:visited {
        border-style: solid;
        border-color: black;
        color: black;
        padding: 14px 25px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
    }

    #actionLink:hover, #actionLink:active {
        text-decoration: underline;
    }

    .img {
        border-style: solid;
        border-color: black;
        padding: 20px;
    }

    .table td {
        padding-top: 25px;
        padding-bottom: 25px;
        padding-left: 20px;
        color: whitesmoke;
        vertical-align: middle;
        font-size: 30px;
    }

    .middleTD {
        text-align: right;
    }

    .mySlides {
        display: none;
        height: 400px;
        width: 100%;
    }

    .leftArrow, .rightArrow, .dot {
        cursor: pointer;
    }

    .leftArrow {
        text-align: left;
        padding-left: 40px;
    }

    .rightArrow {
        text-align: right;
        padding-right: 40px;
    }

    .arrow:hover {
        color: #b4aa50;
    }

    .dot {
        height: 13px;
        width: 13px;
        padding: 0;
        border: 1px solid;
        background-color: #000;
        color: #fff;
        display: inline-block;
        padding-left: 8px;
        padding-right: 8px;
        margin-bottom: 15px;
        text-align: center;
        border-radius: 50%;
        background-color: transparent;
    }

    .dot:hover {
        color: #000;
        background-color: #fff;
    }

    .center {
        text-align: center;
        display: inline-block;
        width: auto;
        margin-top: 16px;
        margin-bottom: 16px;
        font-size: 18px;
        color: #fff;
        position: absolute;
        left: 50%;
        bottom: 0;
        transform: translate(-50%,0%);
        -ms-transform: translate(-50%,0%);
    }

    .content {
        margin-left: auto;
        margin-right: auto;
        max-width: 800px;
        position: relative
    }

    .white {
        color: #000;
        background-color: #fff;
    }

    p {
        font-size: large;
        text-align: center;
    }

    #brand {
        font-size: 55px;
        text-align: center;
    }

    .sale {
        color: red;
        margin: 0px;
    }

    .SalePrice {
        font-weight: bold;
    }

    .discount {
        font-size: 15px;
    }

    .originalPrice {
        margin: 0px;
    }

    .tdSales {
        align-content: center;
        text-align: center;
    }

    #saleTable {
        width: 100%;
    }

    .saleName {
        padding-top: 20px;
        color: black;
        font-size: 18px;
    }

    .linkSales {
        color: black;
        font-size: 22px;
    }
</style>

<div class="main">
    <br />
    <p id="brand">Compagnie NoName Bike</p>
    <br />
    <hr />
    <br />
    <br />
    <h2>Nous pouvons vous faire pédaler en un rien de temps.</h2>
    <br />
    <p>Peu importe qui vous êtes, vous pouvez trouver votre vélo idéal pour tout type de style de vie qui vous convient le mieux. Nous avons des vélos dans de nombreuses couleurs, tailles et styles différents ainsi que des accessoires. Nous avons toutes sortes de vélos adaptés à tout type de terrain qui fait rage, du vélo de tourisme occasionnel au vélo de montagne extrême. Pour ceux qui souhaitent personnaliser leur vélo, nous proposons également des composants de vélo pour construire votre propre vélo personnalisé. Enfin, des vêtements et un guide de sécurité sont également disponibles.</p>
    <br />
    <br />

    <div class="content">
        <img class="mySlides img" src="~/images/touring_2000.jpg">
        <img class="mySlides img" src="~/images/bike-store-employee.jpg">
        <img class="mySlides img" src="~/images/bikeFix.jpg">
        <img class="mySlides img" src="~/images/mountain_400.jpg">
        <img class="mySlides img" src="~/images/road_750.jpg">
        <div class="center" style="width:100%">
            <div class="leftArrow arrow" onclick="plusDivs(-1)">&#10094;</div>
            <div class="rightArrow arrow" onclick="plusDivs(1)">&#10095;</div>
            <span class="dot" onclick="currentDiv(1)"></span>
            <span class="dot" onclick="currentDiv(2)"></span>
            <span class="dot" onclick="currentDiv(3)"></span>
            <span class="dot" onclick="currentDiv(4)"></span>
            <span class="dot" onclick="currentDiv(5)"></span>
        </div>
    </div>

    <br />
    <br />
    <hr />
    <br />
    <h1>Vente</h1>
    <br />
    <hr />
    <br />
    <a href="@Url.Action("SalesFR", "Home", null)" class="linkSales">Voir tous les produits en vente ici</a>
    <br />
    <br />
    <br />
    <table id="saleTable">
        <tr>
            @{
                int count = 0;
                int itemDisplay = 5;

                @foreach (var item in salesList)
                {
                    if (count == itemDisplay)
                    {
                        break;
                    }

                    string controller = "";
                    switch (item.ProductCategory.ParentProductCategoryId)
                    {
                        case 1:
                            controller = "Bikes";
                            break;
                        case 2:
                            controller = "Components";
                            break;
                        case 3:
                            controller = "Clothing";
                            break;
                        case 4:
                            controller = "Accessories";
                            break;
                    }

                    string action = item.ProductCategory.Name.ToString().Replace(" ", "");

                    <td class="tdSales">
                        <a href="@Url.Action("DetailsFR", controller, new { id = item.ProductModelID})" class="tdSales">
                            @{
                                var base64 = Convert.ToBase64String(item.Photo);
                                var imgsrc = string.Format("data:image/gif;base64,{0}", base64);
                                <img src='@imgsrc' width="180px" height="180px" class="img" />
                            }
                            <p id="actionLink" class="saleName">@item.ProductModel</p>
                        </a>
                        <strike class="originalPrice">@item.Price.ToString().Substring(0, item.Price.ToString().Length - 2)$</strike>
                        @{
                            decimal discount = item.Price - (decimal)item.SalePrice;
                        }
                        <p class="sale discount">-@discount.ToString().Substring(0, discount.ToString().Length - 2)$</p>
                        <p class="sale SalePrice">@item.SalePrice.ToString().Substring(0, item.SalePrice.ToString().Length - 2)$</p>
                    </td>

                    count++;
                }
            }
        </tr>
    </table>


    <br />
    <br />
    <hr />
    <br />
    <h1>Parcourez nos catégories de vélos ci-dessous</h1>
    <br />
    <br />

    <br />

    <table class="table">
        <tr>
            <td>
                <a href="@Url.Action("Mountain", "BikesFR", null)">
                    <img class="img" src="~/images/mountain_bike.jpg" alt="mountain bike picture" width="500px" height="300px" />
                </a>
            </td>
            <td>
                @Html.ActionLink("Vélo de montagne", "Mountain", "BikesFR", null, new { id = "actionLink" })
            </td>
        </tr>
        <tr>
            <td class="middleTD">
                @Html.ActionLink("Vélo de route", "Road", "BikesFR", null, new { id = "actionLink" })
            </td>
            <td>
                <a href="@Url.Action("Road", "BikesFR", null)">
                    <img class="img" src="~/images/road_bike.jpg" alt="road bike picture" width="500px" height="300px" />
                </a>
            </td>
        </tr>
        <tr>
            <td>
                <a href="@Url.Action("Touring", "BikesFR", null)">
                    <img class="img" src="~/images/touring_bike.jpg" alt="touring bike picture" width="500px" height="300px" />
                </a>
            </td>
            <td>
                @Html.ActionLink("Vélo de randonné", "Touring", "BikesFR", null, new { id = "actionLink" })
            </td>
        </tr>
    </table>
</div>

<script>
    var myIndex = 0;        //automatic slide show
    var slideIndex = 1;     //manual slide show

    //automatic slide show

    carousel();

    function carousel() {
        var i;
        var x = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");
        for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
        }
        myIndex++;
        if (myIndex > x.length) { myIndex = 1 }
        x[myIndex - 1].style.display = "block";
        setTimeout(carousel, 2000);
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" white", "");
        }
        dots[myIndex - 1].className += " white";
    }

    //slide show with arrows

    showDivs(slideIndex);

    function plusDivs(n) {
        showDivs(slideIndex += n);
    }

    function currentDiv(n) {
        showDivs(slideIndex = n);
    }

    function showDivs(n) {
        var i;
        var x = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");
        if (n > x.length) { slideIndex = 1 }
        if (n < 1) { slideIndex = x.length }
        for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" white", "");
        }
        x[slideIndex - 1].style.display = "block";
        dots[slideIndex - 1].className += " white";
    }
</script>